{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["muiTheme","createMuiTheme","theme","useStyles","makeStyles","mainPaper","height","width","marginTop","marginLeft","padding","spacing","input","marginBottom","label","numberContainer","display","justifyContent","number","color","border","fontSize","boxSizing","fontFamily","fontWeight","lineHeight","borderRadius","letterSpacing","textTransform","logout","position","top","right","Form","token","classes","useState","id","setId","currentId","setCurrentId","loading","setLoading","trigger","refetch","useEffect","window","fetch","process","headers","Authorization","then","response","json","lastId","Paper","className","elevation","Typography","variant","align","CircularProgress","FormGroup","FormLabel","children","FormControl","InputLabel","Input","value","type","onChange","e","target","Button","disabled","onClick","certificateId","method","body","JSON","stringify","Auth","show","setShow","password","setPassword","error","setError","handleSubmit","catch","err","console","log","message","localStorage","setItem","Dialog","maxWidth","fullWidth","open","DialogTitle","DialogContent","autoFocus","onKeyDown","key","endAdornment","IconButton","size","style","DialogActions","App","authorized","authorize","getItem","status","ThemeProvider","CssBaseline","removeItem","Container","overflow","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.db439ef2.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  ThemeProvider,\n  createMuiTheme,\n  makeStyles,\n} from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport Container from '@material-ui/core/Container'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Paper from '@material-ui/core/Paper'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport FormLabel from '@material-ui/core/FormLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport Input from '@material-ui/core/Input'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Typography from '@material-ui/core/Typography'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\n\nimport IconButton from '@material-ui/core/IconButton'\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff'\n\nimport theme from './theme.json'\n\nconst muiTheme = createMuiTheme(theme)\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    height: 434,\n    width: 320,\n    marginTop: '240px',\n    marginLeft: 'calc(50% - 160px)',\n    padding: theme.spacing(3),\n  },\n  input: {\n    marginBottom: theme.spacing(3),\n  },\n  label: {\n    marginBottom: theme.spacing(4),\n  },\n  numberContainer: {\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n  },\n  number: {\n    padding: '5px 15px',\n    color: 'rgba(255, 238, 113, 1)',\n    border: '2px solid rgba(255, 238, 113, 0.5)',\n    fontSize: '1.375rem',\n    boxSizing: 'border-box',\n    fontFamily: 'Roboto, Helvetica, Arial, sans-serif',\n    fontWeight: '500',\n    lineHeight: '1.75',\n    borderRadius: '8px',\n    letterSpacing: '0.02857em',\n    textTransform: 'uppercase',\n    display: 'inline-flex',\n  },\n  logout: {\n    position: 'fixed',\n    top: '0.3em',\n    right: '0.3em',\n    width: 70,\n    height: 70,\n  },\n}))\n\nconst Form = ({ token }) => {\n  const classes = useStyles(muiTheme)\n  const [id, setId] = useState('')\n  const [currentId, setCurrentId] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [trigger, refetch] = useState(false)\n\n  useEffect(() => {\n    typeof window !== 'undefined' &&\n      fetch(`${process.env.REACT_APP_SERVER_URL}/getLastCertificateId`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n        .then((response) => response.json())\n        .then(({ lastId }) => {\n          setCurrentId(lastId)\n          setLoading(false)\n        })\n  }, [setCurrentId, setLoading, trigger, token])\n\n  const handleSubmit = (certificateId) => {\n    fetch(`${process.env.REACT_APP_SERVER_URL}/setLastCertificateId`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ` + token,\n      },\n      body: JSON.stringify({\n        certificateId,\n      }),\n    }).then(() => {\n      setId('')\n      refetch(!trigger)\n    })\n  }\n  return (\n    <Paper className={classes.mainPaper} elevation={5}>\n      <Typography variant='h5' color='textSecondary' align='center'>\n        Текущий последний номер сертификата\n      </Typography>\n      <div className={classes.numberContainer}>\n        {!loading ? (\n          <div className={classes.number}>{currentId}</div>\n        ) : (\n          <CircularProgress />\n        )}\n      </div>\n      <FormGroup>\n        <FormLabel\n          className={classes.label}\n          children={\n            <Typography variant='h5' color='textSecondary' align='center'>\n              Установить последний номер сертификата\n            </Typography>\n          }\n        />\n        <FormControl className={classes.input}>\n          <InputLabel>Номер</InputLabel>\n          <Input\n            value={id}\n            type='number'\n            onChange={(e) => setId(e.target.value)}\n          />\n        </FormControl>\n        <FormControl>\n          <Button\n            disabled={!id}\n            color='primary'\n            variant='contained'\n            onClick={() => handleSubmit(id)}\n          >\n            Установить\n          </Button>\n        </FormControl>\n      </FormGroup>\n    </Paper>\n  )\n}\n\nconst Auth = ({ refetch, trigger }) => {\n  const classes = useStyles(muiTheme)\n  const [show, setShow] = useState(false)\n  const [password, setPassword] = useState('')\n  const [error, setError] = useState(false)\n\n  const handleSubmit = (password) => {\n    fetch(`${process.env.REACT_APP_SERVER_URL}/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        password,\n      }),\n    })\n      .catch((err) => console.log(err))\n      .then((response) => response.json())\n      .then(({ token, message }) => {\n        message === 'Invalid password.' && setError(true)\n        token && window.localStorage.setItem('token', token)\n        token && refetch(!trigger)\n      })\n  }\n  return (\n    <Dialog maxWidth='xs' fullWidth open={true}>\n      <DialogTitle>Введите пароль</DialogTitle>\n      <DialogContent>\n        <FormGroup>\n          <FormControl className={classes.input}>\n            <InputLabel error={error}>\n              {!error ? 'Пароль' : 'Неверный пароль'}\n            </InputLabel>\n            <Input\n              autoFocus\n              value={password}\n              type={!show ? 'password' : 'text'}\n              onChange={(e) => {\n                setPassword(e.target.value)\n                setError(false)\n              }}\n              error={error}\n              onKeyDown={({ key }) => {\n                key === 'Enter' && handleSubmit(password)\n                key === 'Escape' && setPassword('')\n              }}\n              endAdornment={\n                <IconButton size='small' onClick={() => setShow(!show)}>\n                  {!show ? (\n                    <VisibilityIcon style={{ fontSize: '18px' }} />\n                  ) : (\n                    <VisibilityOffIcon style={{ fontSize: '18px' }} />\n                  )}\n                </IconButton>\n              }\n            />\n          </FormControl>\n        </FormGroup>\n        <DialogActions>\n          <FormControl>\n            <Button\n              disabled={!password}\n              color='primary'\n              variant='outlined'\n              onClick={() => handleSubmit(password)}\n            >\n              Войти\n            </Button>\n          </FormControl>\n        </DialogActions>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst App = () => {\n  const classes = useStyles(muiTheme)\n  const [loading, setLoading] = useState(true)\n  const [authorized, authorize] = useState(false)\n  const [trigger, refetch] = useState(false)\n  const token = window?.localStorage.getItem('token')\n\n  useEffect(() => {\n    typeof window !== 'undefined' &&\n      fetch(`${process.env.REACT_APP_SERVER_URL}/auth`, {\n        headers: {\n          Authorization: `Bearer ` + token,\n        },\n      })\n        .then((response) => response.json())\n        .then(({ status }) => {\n          status === 'Succes' && authorize(true)\n          setLoading(false)\n        })\n        .catch(() => {\n          authorize(false)\n          setLoading(false)\n        })\n  }, [token, authorize, trigger])\n  return (\n    <ThemeProvider theme={muiTheme}>\n      <CssBaseline />\n      {authorized && (\n        <IconButton\n          className={classes.logout}\n          color='primary'\n          onClick={() => {\n            window.localStorage.removeItem('token')\n            authorize(false)\n            refetch(!trigger)\n          }}\n        >\n          <ExitToAppIcon fontSize='large' />\n        </IconButton>\n      )}\n      {!loading ? (\n        <Container style={{ height: '720px', overflow: 'hidden' }} maxWidth='md'>\n          {authorized ? (\n            <Form token={token} />\n          ) : (\n            <Auth refetch={refetch} trigger={trigger} />\n          )}\n        </Container>\n      ) : (\n        <CircularProgress\n          style={{\n            height: '80px',\n            marginTop: 'calc(50% - 40px)',\n            width: '80px',\n            marginLeft: 'calc(50% - 40px)',\n          }}\n        />\n      )}\n    </ThemeProvider>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}